<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />    
  <title>Create Shipment</title>
  <link rel="shortcut icon" href="assets/img/icon/ca-fav2.svg">  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
  <style>
    :root{ --accent:#0d6efd; --dark:#0b2545; --muted:#6b7280; --bg:#f7fafc; }
    body{font-family:Inter, system-ui, Arial; margin:0; background:var(--bg); color:#123;}
    .container{max-width:900px;margin:40px auto;background:#fff;padding:28px;border-radius:12px;box-shadow:0 6px 20px rgba(9,30,66,.08);}
    h1{margin:0 0 18px;color:var(--dark)}
    .form-row{display:flex;gap:20px;flex-wrap:wrap;margin-bottom:16px}
    .form-group{flex:1;min-width:220px}
    label{display:block;font-size:14px;color:var(--muted);margin-bottom:6px}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e6eef8;font-size:15px}
    textarea{min-height:80px;resize:vertical}
    .btn{background:var(--accent);color:#fff;padding:12px 20px;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer}
    .btn i{margin-left:6px}
    .response{margin-top:18px;padding:14px;border-radius:8px;display:none}
    .success{background:#d1fae5;color:#065f46}
    .error{background:#fee2e2;color:#991b1b}
  </style>
</head>
<body>
  <div class="container">
    <h1><i class="fa-solid fa-plus"></i> Create Shipment</h1>
    <form id="shipmentForm">
      <div class="form-row">
        <div class="form-group">
          <label>Shipment ID</label>
          <input type="text" name="shipment_id" required>
        </div>
        <div class="form-group">
          <label>Tracking Number</label>
          <input type="text" name="tracking_number" required>
        </div>
        <div class="form-group">
          <label>Assigned Agent</label>
          <input type="text" name="assigned_agent">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Company Name</label>
          <input type="text" name="company_name">
        </div>
        <div class="form-group">
          <label>Branch</label>
          <input type="text" name="branch">
        </div>
        <div class="form-group">
          <label>Delivery Priority</label>
          <select name="delivery_priority">
            <option value="">Select</option>
            <option>Normal</option>
            <option>Express</option>
          </select>
        </div>
      </div>

      <h3>Sender Info</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" name="sender_full_name">
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="text" name="sender_phone">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" name="sender_email">
        </div>
      </div>
      <div class="form-group">
        <label>Address</label>
        <textarea name="sender_address"></textarea>
      </div>

      <h3>Receiver Info</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" name="receiver_full_name">
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="text" name="receiver_phone">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" name="receiver_email">
        </div>
      </div>
      <div class="form-group">
        <label>Address</label>
        <textarea name="receiver_address"></textarea>
      </div>
      <div class="form-group">
        <label>Landmark</label>
        <input type="text" name="receiver_landmark">
      </div>

      <h3>Shipment Details</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Status</label>
          <input type="text" name="status" value="In Transit">
        </div>
        <div class="form-group">
          <label>Weight</label>
          <input type="text" name="weight">
        </div>
        <div class="form-group">
          <label>Value</label>
          <input type="number" step="0.01" name="value">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Items Count</label>
          <input type="number" name="items_count">
        </div>
        <div class="form-group">
          <label>Payment Status</label>
          <select name="payment_status">
            <option>Pending</option>
            <option>Paid</option>
            <option>Failed</option>
          </select>
        </div>
        <div class="form-group">
          <label>Type</label>
          <input type="text" name="type">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Expected Date</label>
          <input type="date" name="expected_date">
        </div>
        <div class="form-group">
          <label>Actual Date</label>
          <input type="date" name="actual_date">
        </div>
        <div class="form-group">
          <label>Received At</label>
          <input type="text" name="received_at">
        </div>
      </div>

      <div class="form-group">
        <label>Delivery Note</label>
        <textarea name="delivery_note"></textarea>
      </div>

      <div class="form-group">
        <label>Shipment History (JSON or text)</label>
        <textarea name="shipment_history"></textarea>
      </div>

      <button type="submit" class="btn">Submit Shipment <i class="fa-solid fa-paper-plane"></i></button>
    </form>
    <div id="responseBox" class="response"></div>
  </div>

  <script>
    const API_URL = "https://cloud.pulsepoint.com.ng/track/add.php";
    const API_TOKEN = "a2FkYS1sb2dpc3RpY3Muc2l0ZQ";

    document.getElementById('shipmentForm').addEventListener('submit', async function(e){
      e.preventDefault();
      const formData = new FormData(this);
      const payload = { action:"add", token:API_TOKEN };
      formData.forEach((v,k)=> payload[k]=v);

      try{
        const res = await fetch(API_URL,{
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        const box=document.getElementById('responseBox');
        if(data.success){
          box.className="response success";
          box.innerHTML="✅ Shipment created successfully!";
        }else{
          box.className="response error";
          box.innerHTML="❌ Failed: "+(data.message||"Unknown error");
        }
        box.style.display="block";
      }catch(err){
        const box=document.getElementById('responseBox');
        box.className="response error";
        box.innerHTML="❌ Error submitting shipment.";
        box.style.display="block";
        console.error(err);
      }
    });
  </script>
</body>
          </html>
