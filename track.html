<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />  
  <link rel="shortcut icon" href="assets/img/icon/ca-fav2.svg">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
  <style>
    :root{ --accent:#0d6efd; --dark:#0b2545; --muted:#6b7280; --bg:#f7fafc; }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0; background:var(--bg); color:#123;}.header{background:#fff; border-bottom:1px solid rgba(15,23,42,.05);}
.header .inner{max-width:1180px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:18px 20px}

.btn-primary{background:var(--accent);color:#fff;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:600;display:inline-flex;gap:8px;align-items:center}

.hero{background:linear-gradient(180deg, rgba(13,110,253,.08), rgba(13,110,253,0.02));padding:48px 20px 64px}
.hero-inner{max-width:1180px;margin:0 auto;display:flex;gap:24px;align-items:center}
.hero-left{flex:1}
.kicker{display:inline-block;background:#042a53;color:#fff;padding:6px 10px;border-radius:999px;font-size:13px}
h1{font-size:34px;margin:16px 0;line-height:1.05;color:var(--dark)}
p.lead{color:var(--muted);margin:0 0 24px}

.track-card{background:#fff;border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(9,30,66,.06);max-width:820px}
.track-row{display:flex;gap:12px}
.input{flex:1}
.input label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
.input input{width:100%;padding:12px;border-radius:8px;border:1px solid #e6eef8;font-size:15px}
.track-actions{display:flex;gap:12px;align-items:center}

.results{max-width:1180px;margin:24px auto;padding:20px}
.card{background:#fff;padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(9,30,66,.04);margin-bottom:18px}
.meta{display:flex;gap:18px;flex-wrap:wrap}
.meta .item{min-width:140px}
.meta .label{font-size:13px;color:var(--muted)}
.meta .value{font-weight:700;color:var(--dark);margin-top:6px}

.timeline{margin-top:16px;border-left:3px solid rgba(13,110,253,.12);padding-left:18px}
.event{position:relative;padding:12px 0}
.event:before{content:'';position:absolute;left:-10px;top:18px;width:14px;height:14px;border-radius:50%;background:#fff;border:3px solid var(--accent)}
.event .time{font-size:13px;color:var(--muted)}
.event .desc{font-weight:600;margin-top:6px}

.muted{color:var(--muted)}
.center{text-align:center}
@media(max-width:900px){.hero-inner{flex-direction:column;align-items:flex-start}h1{font-size:28px}.track-row{flex-direction:column}}

  </style>
</head>
<body>
  <header class="header"></header>  <section class="hero">
    <div class="hero-inner">
      <div class="hero-left">
        <span class="kicker">Track Shipment</span>
        <h1>Track your shipment â€” real time updates</h1>
        <p class="lead">Enter a tracking number to see current status, sender/receiver details, and delivery progress.</p>
        <div style="margin-top:18px" class="track-card">
          <form id="trackForm" onsubmit="return false">
            <div class="track-row">
              <div class="input">
                <label for="tracking_number">Tracking Number</label>
                <input id="tracking_number" name="tracking_number" placeholder="e.g. 737374747474" required>
              </div>
              <div class="track-actions" style="align-self:end">
                <button id="trackBtn" class="btn-primary" style="border:none;cursor:pointer">
                  Track <i class="fa-solid fa-search"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>  <main class="results">
    <div id="emptyState" class="card center" style="padding:40px;display:block">
      <div style="font-size:36px;color:var(--accent)"><i class="fa-solid fa-box"></i></div>
      <h3 style="margin:12px 0 6px">Track your shipment now</h3>
      <p class="muted">Enter a valid Tracking Number above and press <strong>Track</strong> to view details.</p>
    </div><div id="resultArea" style="display:none"></div>

  </main>  <footer style="padding:28px 20px;text-align:center;color:var(--muted);font-size:14px"></footer>  <script>
    const API_URL = "https://cloud.pulsepoint.com.ng/track/";
    const API_TOKEN = "a2FkYS1sb2dpc3RpY3Muc2l0ZQ";

    document.getElementById('trackBtn').addEventListener('click', async function(e){
      e.preventDefault();
      const tracking_number = document.getElementById('tracking_number').value.trim();
      if(!tracking_number){ alert("Please enter tracking number."); return; }

      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({ token: API_TOKEN, tracking_number })
        });
        const {success, data} = await res.json();

        if(success && data){
          document.getElementById('emptyState').style.display='none';
          const resultArea = document.getElementById('resultArea');
          resultArea.style.display='block';

          const history = Array.isArray(data.shipment_history) ? data.shipment_history : (data.shipment_history ? [data.shipment_history] : []);
          let timelineHTML = '';
          history.forEach(ev => {
            timelineHTML += `
              <div class="event">
                <div class="time">${ev.time || ''}</div>
                <div class="desc">${ev.title || ev}</div>
                <div class="muted">${ev.note || ''}</div>
              </div>`;
          });

          resultArea.innerHTML = `
            <div class="card">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap">
                <div>
                  <h2 style="margin:0 0 8px">Shipment Details</h2>
                  <div class="muted">Tracking number: <span>${data.tracking_number}</span></div>
                </div>
                <div style="text-align:right">
                  <div class="muted">Current Status</div>
                  <div style="font-weight:800;color:var(--accent);font-size:18px">${data.status || "Unknown"}</div>
                </div>
              </div>
              <hr style="margin:12px 0;border:none;border-top:1px solid #eef2f8">

              <div class="meta">
                <div class="item"><div class="label">Origin</div><div class="value">${data.sender_address || "N/A"}</div></div>
                <div class="item"><div class="label">Destination</div><div class="value">${data.receiver_address || "N/A"}</div></div>
                <div class="item"><div class="label">Estimated Delivery</div><div class="value">${data.expected_date || "N/A"}</div></div>
                <div class="item"><div class="label">Weight</div><div class="value">${data.weight || "N/A"}</div></div>
              </div>

              <div class="timeline">${timelineHTML}</div>
            </div>

            <div class="card">
              <h3>Sender</h3>
              <p><strong>${data.sender_full_name || ''}</strong><br>
              ${data.sender_address || ''}<br>
              Phone: ${data.sender_phone || ''}<br>
              Email: ${data.sender_email || ''}</p>
            </div>

            <div class="card">
              <h3>Receiver</h3>
              <p><strong>${data.receiver_full_name || ''}</strong><br>
              ${data.receiver_address || ''}<br>
              Phone: ${data.receiver_phone || ''}<br>
              Email: ${data.receiver_email || ''}</p>
            </div>

            <div class="card">
              <h3>Delivery Timeline</h3>
              <div class="meta">
                <div class="item"><div class="label">Expected Date</div><div class="value">${data.expected_date || ''}</div></div>
                <div class="item"><div class="label">Actual Date</div><div class="value">${data.actual_date || ''}</div></div>
                <div class="item"><div class="label">Received At</div><div class="value">${data.received_at || ''}</div></div>
              </div>
            </div>
          `;

          setTimeout(()=> resultArea.scrollIntoView({behavior:'smooth'}),200);
        } else {
          alert("Tracking number not found.");
        }
      } catch(err){
        console.error(err);
        alert("Error fetching tracking details.");
      }
    });
  </script></body>
</html>
